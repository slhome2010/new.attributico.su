# Работа с модулем

## Работа с деревом

Для активации элемента дерева кликните по нему левой кнопкой мыши.

Для разворачивания (раскрытия) элемента дерева выполните двойной клик левой кнопкой мыши.

## Контекстное меню

Контекстное меню вызывается правым кликом по **узлу** дерева. В меню активны только разрешённые действия для выбранного узла. Те же действия можно выполнить с помощью горячих клавиш.

Основные операции с **Группами** и **Атрибутами** доступны через **Drag&Drop**, контекстное меню и горячие клавиши. Полный список действий представлен в [сводной таблице](#using-summary).

### Основные действия

| Действие | Горячие клавиши | Описание |
|----------|----------------|----------|
| **Редактировать** | `Shift + Click` | Включает режим однострочного редактора. Можно редактировать любой узел. |
| **Удалить** | `Del` | Удаляет выбранный узел или несколько узлов. |
| **Вырезать** | `Ctrl + X` | Копирует узел в буфер. После вставки или слияния узел удаляется. |
| **Копировать** | `Ctrl + C` | Копирует узел в буфер для последующей вставки. |
| **Вставить** | `Ctrl + V` | Вставляет узел из буфера. |
| **Объединить** | `Alt + V` | Выполняет слияние узла из буфера с целевым узлом. |
| **Клонировать** | `Alt + C` | Заполняет дежурные шаблоны для всех языков идентичным содержимым. |
| **Раскрыть/Свернуть** | `Ctrl + B` | Переключает состояние дерева между развернутым и свернутым. |
| **Обновить** | `Shift + R` | Перезагружает выбранное дерево. |
| **Настройки** | - | Открывает диалоговое меню настроек для управления порядком сортировки и сворачиванием дерева. |
| **Новая группа** | `Ctrl + M` | Создаёт новую группу и включает однострочный редактор. |
| **Новый атрибут** | `Ctrl + Q` | Добавляет новый атрибут в выбранную группу и включает однострочный редактор. |

## Редактирование

Редактирование узла выполняется с помощью `Shift + Click`, `F2` или через контекстное меню. Данные редактируются отдельно для каждого дерева и языка, при этом обеспечивается синхронизация данных.

:::info
Разница между редактированием **Шаблонов** и **Значений**:
- Изменения в **Значениях** затрагивают все товары, где это значение используется.
- Изменения в **Шаблонах** касаются только товаров с точно совпадающим значением атрибута.
:::

## Удаление значений

Удаление выполняется через контекстное меню или клавишей `Del`. Можно удалить отдельное значение, шаблон или несколько элементов (используя [мультиселект](#using-select)).

Удаление значений — это сложная операция, поскольку значения не имеют уникальных идентификаторов в базе данных. Они хранятся в текстовом виде внутри товаров, поэтому удаление выполняется путем удаления атрибута из товара, если его значение совпадает с образцом.

:::warning
Удаление шаблонов всегда выполняется по точному совпадению, а удаление значений зависит от настройки [Сравнение значений](settings.html#settings-compare).
:::

## Drag-and-Drop

Основные возможности **Drag-and-Drop**:
- Перемещение узлов внутри одного дерева.
- Перемещение узлов между деревьями.
- Изменение группы у атрибута.
- Сортировка групп и атрибутов внутри группы.
- Добавление атрибута в категорию.
- Изменение категории у атрибута.
- Слияние атрибутов без потери значений и связей.

Полный список возможностей **Drag-and-Drop** доступен в [разделе примеров](example.html#using-example).

## Слияние атрибутов

Если несколько атрибутов имеют одинаковое значение, их можно объединить под одним названием с помощью **Ctrl + Drag-and-Drop**. Слияние сохраняет все связи с товарами и категориями, а значения объединяемого атрибута добавляются к целевому через разделитель.

:::danger
После слияния объединяемый узел удаляется без возможности восстановления. Перед операцией рекомендуется создать резервную копию базы данных.
:::

## Фильтр

Фильтр позволяет быстро находить атрибуты, группы и значения в дереве.

| Опция | Описание |
|-------|----------|
| **Только атрибуты** | Поиск выполняется только в атрибутах. |
| **Только значения** | Поиск выполняется только в значениях и шаблонах. |
| **Скрыть несовпадения** | Узлы без совпадений скрываются. |
| **Авторазвернуть** | Автоматически раскрывает узлы с найденными совпадениями. |
| **Счётчики узлов** | Показывает количество узлов с совпадением. |
| **Выделить** | Подсвечивает найденные совпадения. |
| **Примерный поиск** | Поиск по нечётким данным (например, `кп` найдёт `Компьютеры`). |
| **Регулярные выражения** | Поиск по заданному шаблону. |

:::info
Счётчики узлов работают корректно только при отключённой ленивой загрузке.
:::

## Сводная таблица действий

| Операция | Мышь / Drag&Drop | Контекстное меню | Клавиатура |
|----------|------------------|------------------|------------|
| **Раскрыть/Свернуть узел** | Двойной клик | - | - |
| **Выделить узел** | `Ctrl + клик` | - | - |
| **Добавить группу** | - | Новая группа | `Ctrl + M` |
| **Добавить атрибут** | - | Новый атрибут | `Ctrl + Q` |
| **Редактировать** | - | Редактировать | `Shift + Enter` |
| **Удалить** | - | Удалить | `Del` |
| **Сортировать** | Drag&Drop | Вырезать > Вставить | `Ctrl + X` > `Ctrl + V` |
| **Слияние атрибутов** | `Ctrl + Drag&Drop` | Вырезать > Объединить | `Ctrl + X` > `Alt + V` |

Это основные функции работы с модулем **Attribut&co**. Полное руководство включает дополнительные примеры и видеоинструкции.
