:::::::::::::::::::::: {.col-md-9 .col-xl-8 .py-md-3 .pl-md-5 .bd-content role="main"}
::::::::::::::::::::: docs-section
::: page-header
# Настройка модуля. {#settings}
:::

Все настройки, включая настройки фильтра сохраняются при нажатии или

Оперативные настройки сохраняются только на время работы модуля без
перезагрузки страницы.

## Общие настройки. {#settings-main}

::: {.hes-gallery data-wrap="true" img-count="1"}
![Settings](/img/help/attributico/settings.jpg){.img-thumbnail
.img-responsive .mb-3 subtext="Common settings" data-alt="Settings"}
:::

::: table-responsive
  Пункт                          Описание
  ------------------------------ -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Разделитель атрибутов          Применяется если товар может иметь несколько разных значений одного и того же атрибута. Более подробно прочтите в [Термины и определения](theory.html#theory-terms).
  Учитывать порядок сортировки   При формировании деревьев будет учтен порядок сортировки, который установил пользователь. Если этот чекбокс не отмечен, будет сделана сортировка по алфавиту.
  Смарт скроллинг                Включает автопрокрутку узлов дерева внутри фиксированной видимой области. Удобно для больших магазинов при использовании Drag-and-Drop.
  Показывать пустые значения     Показывать или скрывать пустые значения атрибута или пустые шаблоны. О пустых значениях более подробно [Удалить пустые значения](tools.html#tools-empty).
  Товар в новом окне             Открывать страницу (карточку) товара в новом окне. На вкладке [[Товары]{.small}]{.mark} по двойному клику на выбранном товаре есть возможность переадресации на карточку товара.
  Ленивая загрузка               Управление режимом загрузки деревьев. Если режим включен, то, как и раньше, дочерние узлы подгружаются по запросу. Если отключен, дерево грузится полностью. Более подробно в разделе [Загрузка узлов](theory.html#theory-loading).
  Кэш деревьев атрибутов         Управление режимом загрузки деревьев. Если режим включен, то при построении дерева атрибутов на различных вкладках, данные будут получены не из базы данных, а из кэш файла, соответствующего данному дереву. Дополнительно: [Очистить кэш деревьев](tools.html#tools-cache).
  Все магазины                   Управление списком категорий для мультимагазинов. Если режим включен, то в список категорий попадут категории всех магазинов, если отключен, то только категории магазина указанного в системных настройках.
:::

::: {.callout .callout-info}
#### Изменить размеры скроллинга

Высоту области прокрутки можно изменить. Для этого в файле
`/admin/view/stylesheet/attributico.css` надо изменить свойство
`.smart-scroll {height: 250px;}`.
:::

::: {.callout .callout-danger}
#### Соблюдайте осторожность при открытии карточки товара в новом окне

Когда Вы вносите изменения в карточке товара, эти изменения происходят
непосредственно в БД. Attribut&co \"подхватит\" эти изменения только в
момент загрузки модуля. Если Вы переключитесь обратно на страницу модуля
без его перезагрузки, то Attribut&co не будет \"знать\" о ваших
изменениях. Продолжив работу с модулем, Вы рискуете нарушить целостность
данных. Применяйте этот режим в крайних случаях, например, когда важно
видеть всю панораму [Атрибутов]{.node}. В большинстве случаев достаточно
ориентироваться на информационный баннер, где отражаются параметры
[Атрибута]{.node} и [Группы]{.node} с которыми осуществлена
переадресация на карточку товара.
:::

## Настройки деревьев. {#settings-tree}

::: {.hes-gallery data-wrap="true" img-count="1"}
![Tree settings](/img/help/attributico/tree_settings.jpg){.img-thumbnail
.img-responsive .mb-3 subtext="Tree settings" data-alt="Tree settings"}
:::

Теперь есть возможность для каждого дерева сделать настройку дочерних
узлов [Атрибута]{.node}. Отметка чекбокса узла в делает его видимым в
соответствующем дереве. Обозначение деревьев можно посмотреть в разделе
[Термины и определения](theory.html#theory-terms).

## Добавление/удаление атрибутов категории. {#settings-category}

::: {.hes-gallery data-wrap="true" img-count="1"}
![Category attribute
settings](/img/help/attributico/category_attribute_settings.jpg){.img-thumbnail
.img-responsive .mb-3 subtext="Category attribute settings"
data-alt="Category attribute settings"}
:::

::: table-responsive
  Пункт                                  Описание
  -------------------------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Добавлять атрибут категории в товары   При добавлении нового [Атрибута]{.node} в категорию, он будет автоматически добавлен во все товары этой категории. [Значения]{.node} атрибута во всех товарах этой категории будут заполнены в соответствии с разделом \"Добавление значений атрибута в товар\".
  Удалять атрибут категории из товаров   При удалении [Атрибута]{.node} из категории, он будет автоматически удален из всех товаров этой категории.
:::

## Наследование. {#settings-inherit}

::: {.hes-gallery data-wrap="true" img-count="1"}
![Inheritance
settings](/img/help/attributico/inherit_settings.jpg){.img-thumbnail
.img-responsive .mb-3 subtext="Inheritance settingss"
data-alt="Inheritance settings"}
:::

::: table-responsive
  Пункт                                      Описание
  ------------------------------------------ ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Добавлять во все подкатегории              При добавлении нового [Атрибута]{.node} в категорию, он будет рекурсивно добавлен во все дочерние категории (подкатегории). [Значения]{.node} атрибута во всех товарах этих подкатегорий будут заполнены в соответствии с разделом \"Добавление значений атрибута в товар\".
  Удалять из всех подкатегорий               При удалении [Атрибута]{.node} из категории, он будет рекурсивно удален из всех подкатегорий а [Значения]{.node} из всех товаров этих подкатегорий.
  Автовыбор подкатегорий с учетом иерархии   Рекурсивный выбор всех дочерних подкатегорий отмеченной категории. Если отмечены все дочерние категории, родительская отмечается автоматически.
:::

Алгоритм наследования требует некоторых пояснений. Первые два пункта
настроек обеспечивают недостаточно гибкий алгоритм. Что делать, если не
во все подкатегории требуется добавлять тот или иной атрибут? Начиная с
версии 2.1.0 появилась возможность отметить целевые подкатегории с
помощью чекбоксов. Пока ничего не отмечено - действуют правила
рекурсивного добавления/удаления (если отмечены первые два пункта). Если
отмечена хотя бы одна категория - действие рекурсии отменяется. Т.е.
отменяется действие первых двух пунктов. Все действия будут производится
только с отмеченными категориями.

Впрочем, теперь даже без первых двух пунктов можно рекурсивно отметить
все подкатегории кликнув на чекбокс родительской категории. Для этого
пункт [Автовыбор подкатегорий с учетом иерархии]{.im} должен быть
отмечен (включен).

::: {.callout .callout-warning}
#### Обратите внимание

При включенном режиме иерархии действует и обратное правило - при выборе
всех дочерних, родительская выбирается автоматически. Или - при отмене
хотя бы одной дочерней, родительская автоматически отменяется.
:::

Учитывая сказанное выше, если не нужна рекурсия, если не нужна иерархия,
а нужен произвольный набор категорий, то режим [Автовыбор подкатегорий с
учетом иерархии]{.im} надо отключить. Для оперативного управления этим
режимом в дереве [Категории]{.tree} в контекстном меню, [Настройки]{.im}
есть пункт [Учитывать иерархию]{.im}.

-   ![Hierarchical
    multi-selection](/img/help/attributico/hier_category.jpg){.img-thumbnail
    .img-responsive .mb-3 subtext="Hierarchical multi-selection"
    data-alt="Hierarchical multi-selection"}
-   ![Hierarchical
    operate](/img/help/attributico/hier_operative.jpg){.img-thumbnail
    .img-responsive .mb-3 subtext="Hierarchical operate"
    data-alt="Hierarchical operate"}

::: {.callout .callout-warning}
#### Очень важно

Действия всегда выполняются по отношению к целевой категории независимо
от того, отмечена она или нет. Целевая - это та категория, куда вы
перетаскиваете атрибут с помощью Drag-and-Drop или Copy-Paste, которая в
результате откроется в дереве справа со всеми своими [Атрибутами
категории]{.node}.
:::

## Добавление значений атрибута в товар. {#settings-product}

::: {.hes-gallery data-wrap="true" img-count="1"}
![Addition attributes values to
products](/img/help/attributico/product_settings.jpg){.img-thumbnail
.img-responsive .mb-3 subtext="Addition attributes values to products"
data-alt="Addition attributes values to products"}
:::

::: table-responsive
  Пункт                 Описание
  --------------------- ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Значения атрибутов    Этот пункт задает [[способ]{.small}]{.mark} действий со [Значениями]{.node} атрибута в момент добавления [Атрибута]{.node} в категорию.
  `Очищать`             При добавлении [Атрибута]{.node} в категорию, [Значения]{.node} атрибута будут очищены.
  `Не менять`           При добавлении [Атрибута]{.node} в категорию, [Значения атрибута]{.node}, если они уже есть в товарах, останутся без изменений.
  `Заменять дежурным`   При добавлении [Атрибута]{.node} в категорию, [Значения]{.node} атрибута в товарах этой категории, будут заменены [[Дежурным шаблоном]{.node}](theory.html#theory-duty), если сам этот шаблон не пустой.
  `Только в пустые`     При добавлении [Атрибута]{.node} в категорию, пустые [Значения]{.node} атрибута в товарах этой категории, будут заменены [[Дежурным шаблоном]{.node}](theory.html#theory-duty), если сам этот шаблон не пустой, непустые [Значения]{.node} атрибута останутся без изменений.
:::

::: {.callout .callout-info}
#### Ручной ввод.

По точно такому же [[способу]{.small}]{.mark}, значения атрибутов будут
изменяться при \"ручном\" редактировании карточки товара. Например,
отметка пункта \"Показывать в категории\" на вкладке
[[Связи]{.small}]{.mark} приведет к добавлению в этот товар всех
атрибутов данной категории, а в поле [Значение]{.node} в колонке
\"Текст\" подставится [[Дежурный
шаблон]{.node}](theory.html#theory-duty).
:::

::: {.callout .callout-warning}
#### Внимание!

При отключенном пункте [Добавлять атрибут категории в товары]{.im},
настройки [Добавление значений атрибута в товар]{.im} не активируются.
:::

## Сравнение значений. {#settings-compare}

Эта настройка определяет алгоритм обновления [Значений]{.node} после их
редактирования.

::: {.hes-gallery data-wrap="true" img-count="1"}
![Editing and replacement
mode](/img/help/attributico/comparemode.jpg){.img-thumbnail
.img-responsive .mb-3 subtext="Editing and replacement mode"
data-alt="Editing and replacement mode"}
:::

Сохранение или обновление [Значений]{.node} происходит в момент закрытия
однострочного редактора если не было отмены клавишей [\[Esc\]]{.kbd}. В
этот момент происходит поиск редактируемого образца среди всех
[Значений]{.node} данного [Атрибута]{.node} и замена его на новое,
отредактированное, состояние.

Стандартом является поиск и замена всех вхождений редактируемого образца
(подстроки) в [Значение]{.node} (строку)

Например, есть такие записи
(`MP4/AVI, MP4-MPEG4/MP4-MPG/VOB, MP4/AVI/MKV, MP4/AVI/MKV/VOB`). После
замены, например, `MP4` на `MP3` произойдет следующее
(`MP3/AVI, MP3-MPEG4/MP3-MPG/VOB, MP3/AVI/MKV, MP3/AVI/MKV/VOB`), т.е.
все вхождения образца `MP4` обновились на `MP3`.

Теперь рассмотрим пример, где такое обновление нас не устроит. Допустим,
некоторый [Атрибут]{.node} имеет набор [Значений]{.node}
([Шаблонов]{.node}) (`50, 50-100, 50/500/500-5000, 500`). После замены
`50` на `50гр` получим неожиданный результат
(`50гр, 50гр-100, 50гр/50гр0/50гр0-50гр00, 50гр0`).

Несмотря на то, что это частный случай, можно его учесть. Для этого надо
включить настройку \"[По точному совпадению]{.im}\". В этом режиме
результат редактирования будет правильным
(`50гр, 50-100, 50гр/500/500-5000, 500`).

::: {.callout .callout-info}
#### Разница редактирования [Шаблонов]{.node} и [Значений]{.node}

Описанная выше настройка касается редактирования [Значений]{.node}.

Обновление [Шаблона]{.node} всегда делается по точному совпадению
редактируемого образца и всего [Шаблона]{.node} целиком.
:::

Эта настройка влияет также на выборку товаров, у которых присутствует
определенное [Значение атрибута]{.node}.

Например, если установлен режим \"По вхождению подстроки\", то при
нажатии на [Значение атрибута]{.node} `20`, в дереве товаров будут
выведены товары со [Значениями]{.node} `20`, `120`, `200`.

Если же установлен режим \"По точному совпадению\", то при нажатии на
[Значение атрибута]{.node} `20`, в дереве товаров будут выведены товары
только со [Значениями]{.node} `20`.

От этой настройки зависит также [удаление
значений](using.html#using-value).

## Оперативное изменение настроек. {#settings-dialog}

Некоторые настройки можно изменять оперативно, в процессе работы. По
окончании работы они не сохраняются.

Если в [контекстном меню](using.html#using-context-menu) выбрать пункт
\"Настройки\", то появится [диалоговое окно](using.html#using-dialog)
управления деревом.
:::::::::::::::::::::
::::::::::::::::::::::
