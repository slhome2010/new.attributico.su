# Работа с модулем. {#using}

## Работа с деревом. {#using-tree}

Для активизации какого либо элемента дерева необходимо сделать `Click` на этом элементе левой кнопкой мышки.

Для развертывания (раскрытия) какого либо элемента дерева необходимо сделать двойной `Click` на этом элементе левой кнопкой мышки.

## Контекстное меню. {#using-context-menu}

Вызов контекстного меню осуществляется кликом правой кнопкой мыши на каком либо <span class="tree">Узле</span>.

Действия, которые разрешено осуществлять по отношению к выбранным <span class="tree">Узлам</span> дерева будут активными в контекстном меню. Те же действие можно вызвать и по сочетанию "горячих" клавиш.

Основные манипуляции с <span class="node">Группами</span> и <span class="node">Атрибутами</span> Доступны и через Drag&Drop, и через контекстное меню, и с помощью "горячих" клавиш. Все действия отражены в [сводной таблице](#using-summary).

<div class="table-responsive">

|  | Действие | Горячие клавиши | Описание |
|---|---|---|---|
| <i class="fa fa-pencil"></i> | Редактировать | `Shift + Click` | Включается режим однострочного редактора. Можно редактировать любой <span class="tree">Узел</span>. |
| <i class="fa fa-trash"></i> | Удалить | `Del` | Удаляется выбранный <span class="tree">Узел</span> или несколько выбранных <span class="tree">Узлов</span> дерева. |
| <i class="fa fa-scissors"></i> | Вырезвть | `Ctrl + X` | Выбранный <span class="tree">Узел</span> копируется в буфер. После выполнения вставки или слияния <span class="tree">Узел</span> удаляется. |
| <i class="fa fa-copy"></i> | Копировать | `Ctrl + C` | Выбранный <span class="tree">Узел</span> копируется в буфер. Его можно вставить в нужное место. |
| <i class="fa fa-paste"></i> | Вставить | `Ctrl + V` | Вставка <span class="tree">Узла</span> находящегося в буфере. |
| <i class="fa fa-link"></i> | Объединить | `Alt + V` | Выполняется слияние <span class="tree">Узла</span> находящегося в буфере с выбранным целевым <span class="tree">Узлом</span>. |
| <i class="fa fa-forward"></i> | Клонировать | `Alt + C` | Выполняется заполнение <span class="node">Дежурных шаблонов</span> для всех языков идентичным содержимым. |
| <i class="fa fa-folder-open"></i> | Раскрыть/Свернуть | `Ctrl + B` | Переключатель. С каждым нажатием выполняется раскрытие всех свернутых узлов дерева или сворачивание раскрытых. |
| <i class="fa fa-refresh"></i> | Обновить | `Shift + R` | Позволяет перезагрузить выбранное дерево. |
| <i class="fa fa-gear"></i> | Настройки |  | Будет вызвано диалоговое меню настроек для данного дерева. Можно управлять "Порядком сортировки" и режимом сворачивания/разворачивания дерева. |
| <i class="fa fa-plus"></i> | Новая группа | `Ctrl + M` | Добавится новая <span class="node">Группа</span> и включится однострочный редактор. Синхронно добавится во все деревья. |
| <span class="fa fa-plus"></span> | Новый атрибут | `Ctrl + Q` | В выбранную <span class="node">Группу</span> добавится новый <span class="node">Атрибут</span> и включится однострочный редактор. Синхронно добавится во все деревья. |

</div>

## Диалоговое меню. {#using-dialog}

Если в [контекстном меню](#using-context-menu) выбрать пункт "Настройки", то появится диалоговое окно управления деревом.

<div class="table-responsive">

| Пункт | Назначение |
|---|---|
| Автоматически сворачивать | По умолчанию - включено, значит при разворачивании какого либо элемента дерева, ближайшие родственные элементы (элементы того же уровня) будут сворачиваться. Это сделано, чтоб не загромождать экран информацией. Но иногда требуется видеть сразу несколько развернутых элементов, тогда следует этот пункт отключить. В зависимости от этого работают пункты [контекстного меню](#using-context-menu) "Развернуть" и "Свернуть" |
| Порядок сортировки | Позволяет временно отключить порядок сортировки в конкретном дереве. При отключенном пункте все сортируется по алфавиту. |
| Ленивая загрузка | Оперативное управление режимом загрузки деревьев. Если режим включен, то, как и раньше, дочерние узлы подгружаются по запросу. Если отключен, дерево грузится полностью. Более подробно в разделе [Загрузка узлов](theory.html#theory-loading). |
| Учитывать иерархию | Работает только в дереве категорий. Для оперативного управления рекурсивным выбором подкатегорий. |
| Расхождения | Работает только в дереве товаров. Для оперативного управления [выборкой товаров](theory.html#theory-product). |

</div>

## Редактирование. {#using-edit}

Режим редактирования включается на выбранном <span class="tree">Узле</span> через `Shift + Click` или `F2` или через [контекстное меню](#using-context-menu).

Редактирование данных происходит в каждом дереве и для каждого языка отдельно. При необходимости обеспечения целостности данных срабатывает синхронизация.

:::info

#### Разница редактирования <span class="node">Шаблонов</span> и <span class="node">Значений</span>

Если Вы вносите изменения в <span class="node">Значение</span>, то изменения произойдут во всех товарах, где присутствует это <span class="node">Значение</span>, а значит и во всех <span class="node">Шаблонах</span>. Т.е. если <span class="node">Значение</span> присутствует в нескольких <span class="node">Шаблонах</span>, то изменения коснутся их всех.

Если изменения делаются в <span class="node">Шаблоне</span>, то это касаются всех товаров, где присутствует данный <span class="node">Атрибут</span> и его значение в точности совпадает с редактируемым <span class="node">Шаблоном</span>, другие товары и <span class="node">Шаблоны</span> затронуты не будут.

:::

Некоторые особенности редактирования <span class="node">Значений</span> можно уточнить в описании настройки [Редактирование значений](settings.html#settings-replace).

## Удаление значений. {#using-value}

Операцию можно выполнить через [контекстное меню](#using-context-menu) или клавишей `Del`. Можно удалить <span class="node">Значение</span>, <span class="node">Шаблон</span> или сразу несколько (используя [мультиселект](#using-select)).

Операция, на самом деле, непростая. Вы должны хорошо представлять себе механизм, который стоит за нажатием одной клавиши.

Напомним, что <span class="node">Значения</span> или описание характеристики товара это обычные текстовые поля, связанные с конкретным товаром. Они не имеют id-шников. Т.е. в Базе Данных они прописываются как текст в каждом товаре. Это означает, что удалить их можно только из товаров. По сути удаление <span class="node">Значений</span> это операция по удалению <span class="node">Атрибута</span> из товара если <span class="node">Значение</span> этого <span class="node">Атрибута</span> совпадает с образцом.

Допустим есть товар или товары, у которых <span class="node">Атрибут</span> `Тестовый атрибут 3.1` принимает <span class="node">Значение</span> `тестовое значение 3.2.1`

И есть товар или товары, у которых <span class="node">Атрибут</span> `Тестовый атрибут 3.1` принимает <span class="node">Значение</span> `тестовое значение 3.2.2`

Необходимо у всех товаров удалить <span class="node">Атрибут</span> `Тестовый атрибут 3.1` если он принимает <span class="node">Значение</span> `тестовое значение 3.2.1`

